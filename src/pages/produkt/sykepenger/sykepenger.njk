---
tags: ['produkt']
// title: 'Søknad om refusjon av reiseutgifter knyttet til ortopediske hjelpemidler, parykk, tilpasningskurs, folkehøyskole, grunnmønster eller brystprotese'
description: 'Basert på variant E av pleiepenger. Serif-font på avsnitt og lister i hovedspalte.'
permalink: 'produkt/sykepenger/index.html'
---
{%- extends 'base.njk' -%}

{%- from "macros/button.njk" import button -%}
{%- from "macros/microcard.njk" import microcard -%}
{%- from "macros/tile.njk" import tile -%}

{% block styles %}
<style>
  .prose > :where(p, ul, ol) {
    font-family: "Source Serif 4", serif;
    line-height: 1.75;
  }
  .prose h4 {
    font-weight: 600;
  }
  .prose > div {
    display: flex;
    gap: 0.125rem;
    grid-auto-flow: column;
    border-radius: 0.375rem;
    overflow: clip;
  }
  .prose > div .button {
    background-color: #E6F0FF;
    color: #0056B4;
    border-width: 0;
    flex-grow: 1;
    inline-size: 48%;
    border-radius: 0.125rem;
  }
  .prose > div .button:hover {
    background: #CCE1FF;
  }
  .prose > div .button:nth-child(2) {
    font-weight: 400;
  }
</style>
{% endblock %}

{%- block content -%}

  {% set chapters = collections.all| onlyTags('sykepenger', 'innhold') | sort(false, false, 'data.order') %}

  <main class="grid py-page grid-cols-mini lg:grid-cols-maxi">
    <div class="col-main lg:col-wide">
      <div class="text-sm tracking-widest uppercase">{{ type | safe }}</div>
      <h1 class="mt-1 font-bold text-5xl/tight text-balance">{{ title | safe }}</h1>
      <p class="mt-6 font-serif text-lg text-pretty max-w-prose">{{ ingress | safe }}</p>

      {# Audience #}
      {% if audience %}       
      <div class="mt-6 -ml-1">
        <span class="inline-block px-3 py-2 text-sm leading-none rounded-full bg-slate-200 ">
          For {{ audience | lower | safe }}
        </span>
      </div>
      {% endif %}

    </div>

    {# Innholdsfortegnelse #}
    <div class="z-10 mt-8 isolate">
      <h2 class="text-base font-semibold">Innhold på siden</h2>
      <ul class="grid gap-4 px-5 py-5 mt-2 rounded-lg bg-slate-100">
        {% for chapter in chapters.slice(0, -1) %}
        <li class="relative grid grid-cols-[auto_1fr] items-baseline">
          <span class="inline-flex items-center justify-center row-span-2 mr-2 font-semibold leading-none" aria-hidden="true">{{ loop.index }}.</span>
          <a class="p-1 -m-1 text-blue-500 underline hover:text-blue-700 text-base/snug hover:no-underline" href="#{{ chapter.data.title | slugify }}">
            {{ chapter.data.title }}
          </a>
          <p class="col-start-2">{{ chapter.data.ingress | safe }}</p>
        </li>
        {% endfor %}
      </ul>
    </div>


    {# Innhold #}
    {% for chapter in chapters %}
      {% set chapterIndex = loop.index %}
      <section class="grid grid-flow-row-dense pt-12 col-full grid-cols-mini lg:grid-cols-maxi" id="{{ chapter.data.title | slugify }}"  x-data="{ tocOpen: false }">
        <div class="col-wide">
          <div class="grid items-end pl-8 rounded-lg bg-slate-100 pt-2xl aspect-[2/1]">
            <span class="font-black -mb-9 text-white text-[20em]/[0.8]">{{ loop.index }}</span>
          </div>
          <h2 class="mt-8 font-bold text-4xl/snug text-balance">{{ chapter.data.title }}</h2>
          <p>{{ chapter.data.ingress | safe }}</p>
        </div>

        {# Chapter TOC #}
        {% if chapter.templateContent and chapter.templateContent | toc | length > 0%}
        <nav class="relative mt-8 mb-8 lg:order-1 lg:col-side">
          <h3 class="py-2 font-semibold ">I dette kapittelet</h3>
          <div class="z-10 rounded-lg lg:sticky lg:top-2 bg-slate-100">
            <div class="px-5 py-3 border-b toc toc--b toc--sticky border-slate-200">
              {{ chapter.templateContent | toc | safe }}
            </div>
            <div class="relative" x-data="{ dropdownOpen: false }">
              <button class="flex items-center gap-3 px-5 py-3 font-semibold text-blue-500 hover:text-blue-600 group" x-on:click="dropdownOpen = !dropdownOpen" type="button" x-bind:aria-expanded="dropdownOpen">
                <span>Bytt kapittel</span>
                {{ '/src/_includes/svg/icons/chevron-down.svg' | svgContents('w-5 h-5 -translate-x-1 group-aria-expanded:rotate-180') | safe }}
              </button>
              <ol class="absolute w-full max-w-md gap-1 px-2 py-1.5 divide-y rounded-lg shadow-lg divide-slate-300 top-full mt-1 bg-slate-100" x-show="dropdownOpen" x-on:click.outside="dropdownOpen = false">
                {% for chapter in chapters %}
                <li class="py-1">
                  {% if loop.index === chapterIndex %}
                  <span class="flex items-center gap-3 px-3 pt-1.5 pb-1 font-semibold">
                    {{ chapter.data.title }}
                    <span class="w-2 h-2 rounded-full bg-slate-500" aria-hidden="true"></span>
                  </span>
                  {% else %}
                  <a class="flex items-center gap-3 px-3 pt-1.5 pb-1 font-semibold text-blue-500 hover:rounded hover:underline hover:bg-blue-100" href="#{{ chapter.data.title | slugify }}" x-on:click="dropdownOpen = false">
                    {{ chapter.data.title }}
                  </a>
                  {% endif %}
                </li>
                {% endfor %}
              </ol>
            </div>
          </div>
        </nav>
        {% endif %}

        {# Main Content #}
        <div class="mt-4 prose col-main">
          {{ chapter.templateContent | markdown | safe }}
        </div>
      </section>
    {% endfor %}

    <div class="pt-2 mt-12 text-sm italic border-t border-slate-200 col-main">{{ published | safe }}</div>
  </main>
{%- endblock -%}


{% block bodyscript %}
  <script>
    const headings = document.querySelectorAll('.prose h3');
    const headingsArr = Array.from(headings);

    const navItems = document.querySelectorAll('.toc--sticky li');

    function activateNavByIndex(index) {
      if (headings[index].classList.contains('active'))
        return;

      const currentActive = document.querySelectorAll('.toc--sticky .active');
      for (let i = currentActive.length - 1; i >= 0; i--) {
        currentActive[i].classList.remove('active');
      }
      navItems[index].classList.add('active');
    };

    const intersectionCallback = (entries, observer) => {
      if (entries[0].intesectionRatio <= 0)
          return;
      
      if (entries[0].intersectionRatio > 0.90) {    
        activateNavByIndex(headingsArr.indexOf(entries[0].target))
      }
    };

    const intersectionOptions = {
      threshold: 1,
      rootMargin: '15% 0px -60% 0px'
    };

    const intersectionObserver = new IntersectionObserver(intersectionCallback, intersectionOptions);

    for (let i = 0; i < headings.length; i++) {
      intersectionObserver.observe(headings[i]);  
    };

  </script>
{% endblock %}